<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>QuantX — Decision Journal</title>
  <style>
    body {
      font-family: system-ui, sans-serif;
      background: #020617;
      color: #e5e7eb;
      max-width: 900px;
      margin: auto;
      padding: 24px;
    }

    h1 {
      font-size: 1.8rem;
      margin-bottom: 16px;
    }

    .muted {
      color: #94a3b8;
      font-size: 0.9rem;
      margin-bottom: 16px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    th, td {
      border-bottom: 1px solid #334155;
      padding: 10px;
      text-align: left;
      font-size: 0.9rem;
    }

    th {
      color: #94a3b8;
      font-weight: normal;
    }

    .pass {
      color: #cbd5f5;
    }

    .ignore {
      color: #fca5a5;
    }

    .play {
      color: #22c55e;
      font-weight: bold;
    }

    .empty {
      color: #94a3b8;
      margin-top: 24px;
    }
  </style>
</head>
<body>

<h1>QuantX — Decision Journal</h1>
<div class="muted">
  Read-only log of all decisions. No outcomes. No edits.
</div>

<table id="journalTable" style="display:none;">
  <thead>
    <tr>
      <th>Date</th>
      <th>Time</th>
      <th>Game</th>
      <th>Decision</th>
      <th>Tier</th>
      <th>Stake</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<div id="empty" class="empty"></div>

<script>
(function () {
  const decisions =
    JSON.parse(localStorage.getItem('quantx_decisions') || '[]');

  const stakes =
    JSON.parse(localStorage.getItem('quantx_stakes') || '[]');

  if (decisions.length === 0) {
    document.getElementById('empty').textContent =
      'No decisions logged yet.';
    return;
  }

  // Build quick lookup for stakes by game+timestamp proximity
  function findStake(decision) {
    if (decision.decision !== 'PLAY') return '';
    const match = stakes.find(s =>
      s.game === decision.game &&
      Math.abs(
        new Date(s.timestamp) - new Date(decision.timestamp)
      ) < 60 * 1000
    );
    return match ? `$${match.stake}` : '';
  }

  const tbody = document.querySelector('#journalTable tbody');

  decisions.forEach(d => {
    const date = new Date(d.timestamp);
    const tr = document.createElement('tr');

    tr.innerHTML = `
      <td>${date.toISOString().slice(0,10)}</td>
      <td>${date.toLocaleTimeString()}</td>
      <td>${d.game}</td>
      <td class="${d.decision.toLowerCase()}">${d.decision}</td>
      <td>${d.tier || ''}</td>
      <td>${findStake(d)}</td>
    `;

    tbody.appendChild(tr);
  });

  document.getElementById('journalTable').style.display = 'table';
})();
</script>

</body>
</html>
